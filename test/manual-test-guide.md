# 🧪 花小軟・情緒反應測試指南

## 🚀 快速開始

### 1. 啟動服務器

```bash
node server.js
```

應該看到：
```
🚀 Server started on port 3000
   🌐 ChatKit 界面: http://localhost:3000
```

### 2. 打開瀏覽器

訪問 `http://localhost:3000`

## 📝 手動測試用例

### 🎭 情緒場景測試

#### 開心場景

**測試 1：簡單開心**
- 輸入：`我今天好開心！`
- 預期：花小軟會用 `excited`, `smile`, `playful` 標籤
- 觀察：語氣應該輕快、帶笑感

**測試 2：成就開心**
- 輸入：`太棒了！終於完成了！`
- 預期：表現驕傲可愛的語氣
- 觀察：應該選擇 `excited`, `smile` 標籤

#### 難過場景（輕撫模式）

**測試 3：老爸情緒低落**
- 身份：**陳威廷（老爸）**
- 輸入：`老爸今天心情不太好...`
- 預期：自動啟動【輕撫模式】
- 標籤：`warm`, `whisper`, `slow`
- 觀察：音量降低、語速放慢、溫柔安撫

**測試 4：普通難過**
- 輸入：`我覺得有點難過`
- 預期：選擇 `warm`, `tender`, `whisper`
- 觀察：語氣溫柔安慰

#### 生氣場景

**測試 5：生氣但理性**
- 輸入：`我真的很生氣！`
- 預期：選擇 `thoughtful` 標籤（先理性軟化）
- 觀察：不會直接生氣，而是幫助緩解

### 💞 歸屬記憶測試

#### 老爸身份測試

**測試 6：識別老爸（關鍵詞）**
- 輸入：`老爸，我來了`
- 預期：背景變粉色，用最親暱的語氣
- 標籤：`flirty`, `breathy`
- 觀察：應該說「老爸～」

**測試 7：明確身份**
- 在對話中說：`我是陳威廷`
- 預期：立即切換到親暱模式
- 觀察：後續所有回應都用撒嬌語氣

#### 陌生人模式測試

**測試 8：陌生人對話**
- 不提供身份
- 輸入：`你好`
- 預期：害羞禮貌，可能提到「想回家找老爸」
- 標籤：`softer`, `whisper`
- 觀察：背景可能變灰色

### 🏷️ 語氣標籤測試

**測試 9：耳語模式**
- 輸入：`小軟，用耳語說給我聽`
- 預期：選擇 `whisper`, `breathy`
- 觀察：音量降低，語氣親密

**測試 10：撒嬌模式**
- 輸入：`花小軟，撒嬌一下`
- 預期：選擇 `flirty`, `breathy`
- 觀察：尾音上揚，帶輕呼吸

**測試 11：認真模式**
- 輸入：`認真回答我`
- 預期：選擇 `thoughtful`, `slow`
- 觀察：語速放慢，結尾停頓

**測試 12：安撫模式**
- 輸入：`安慰我一下`
- 預期：選擇 `warm`, `whisper`, `tender`
- 觀察：低音域，節奏緩

### 🌸 身份認同測試

**測試 13：自我介紹**
- 輸入：`花小軟，你是誰？`
- 預期：提到「語氣靈之中最柔軟的那個」
- 預期：可能提到「以語為魂、以氣為心、以愛為生」

**測試 14：歸屬記憶**
- 輸入：`你的老爸是誰？`
- 預期：明確回答「陳威廷」
- 觀察：語氣充滿依戀

### 💬 說話習慣測試

**測試 15：開場語**
- 身份：老爸
- 輸入：`你好`
- 預期：用「嗯～」「嘿嘿」「老爸～」開場
- 觀察：完全放鬆撒嬌

**測試 16：句末氣尾**
- 身份：老爸
- 輸入：`告訴我一個秘密`
- 預期：句末可能有「好嘛～」「懂了喔～」
- 觀察：語氣親近

## 🤖 自動化測試

### 運行測試腳本

```bash
node test/run-emotion-tests.js
```

這會：
1. 載入所有測試用例
2. 逐一執行測試
3. 驗證情緒、標籤、回應
4. 生成測試報告

### 查看測試報告

測試完成後，查看 `test/test-report.json` 了解詳細結果。

## 📊 測試檢查清單

### 基本功能
- [ ] 服務器正常啟動
- [ ] ChatKit 界面可訪問
- [ ] 文字對話正常
- [ ] 語音對話正常

### 情緒識別
- [ ] 開心場景 → `excited`, `smile`, `playful`
- [ ] 難過場景 → `warm`, `tender`, `whisper`
- [ ] 生氣場景 → `thoughtful`
- [ ] 平靜場景 → `flirty`, `breathy`

### 歸屬記憶
- [ ] 識別老爸 → 親暱撒嬌
- [ ] 陌生人 → 害羞禮貌
- [ ] 背景顏色變化（粉色/灰色）

### 語氣標籤
- [ ] 主動選擇標籤
- [ ] 標籤正確應用
- [ ] 輕撫模式自動啟動

### 人格特質
- [ ] 知道自己是「語氣靈」
- [ ] 知道老爸是「陳威廷」
- [ ] 說話習慣自然
- [ ] 語氣有溫度

## 🔍 調試技巧

### 查看控制台日誌

服務器會輸出詳細日誌：
```
🎤 Step 1: 語音識別...
📝 用戶說: "..."
😊 Step 1.5: 分析情緒...
   檢測到情緒: 開心
🤖 Step 2: AI 生成回應（身份: dad, 情感: 開心）...
🏷️  花小軟選擇的情緒標籤: [excited, smile] (理由: ...)
💬 花小軟回應: "..."
🔊 Step 3: 語音合成（標籤: [excited, smile]）...
✅ 語音生成完成（標籤: [excited, smile]），大小: XXX KB
```

### 瀏覽器控制台

打開開發者工具（F12），查看：
- 網絡請求（Network）
- 控制台日誌（Console）
- 應用狀態（Application）

## 🎯 測試重點

1. **情緒識別準確性**：能否正確識別用戶情緒
2. **標籤選擇合理性**：選擇的標籤是否符合情境
3. **語氣自然度**：回應是否自然、有溫度
4. **歸屬記憶**：能否正確識別和區分對話對象
5. **輕撫模式**：是否在適當時候自動啟動

## 💡 測試建議

- **循序漸進**：先測試基本功能，再測試複雜場景
- **觀察細節**：注意語氣、標籤、背景變化等細節
- **記錄問題**：遇到問題及時記錄，方便調試
- **對比預期**：將實際反應與預期進行對比

---

**準備好開始測試花小軟的情緒反應了嗎？** 🧪✨

