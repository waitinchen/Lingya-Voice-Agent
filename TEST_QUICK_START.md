# 🚀 測試環境快速啟動指南

## ⚡ 快速開始（3 步驟）

### 1️⃣ 啟動服務器

```bash
npm start
```

或使用開發模式（自動重啟）：

```bash
npm run dev
```

應該看到：
```
🚀 Server started on port 3000
   🌐 ChatKit 界面: http://localhost:3000
```

### 2️⃣ 運行快速測試

在新終端窗口：

```bash
npm test
```

或運行快速測試：

```bash
node test/quick-test.js
```

### 3️⃣ 打開瀏覽器測試

訪問 `http://localhost:3000`

## 📚 測試題庫

所有測試用例都在 `test/emotion-test-cases.json`

包含 **10 個分類、30+ 個測試用例**：

1. **開心場景** - 測試開心情緒反應
2. **難過場景** - 測試輕撫模式
3. **生氣場景** - 測試理性軟化
4. **平靜場景** - 測試親暱語氣
5. **歸屬記憶** - 測試老爸/陌生人區分
6. **語氣標籤** - 測試特定標籤選擇
7. **語音功能** - 測試自我認知
8. **身份認同** - 測試歸屬記憶
9. **說話習慣** - 測試自然表達
10. **綜合場景** - 測試複雜情況

## 🧪 推薦測試順序

### 第一輪：基本功能
1. 訪問 `http://localhost:3000`
2. 輸入：`你好`
3. 觀察：是否有回應？語音是否播放？

### 第二輪：情緒識別
1. 輸入：`我今天好開心！`
2. 觀察：標籤是否包含 `excited`, `smile`？
3. 輸入：`我今天心情不太好...`
4. 觀察：是否啟動輕撫模式（`warm`, `whisper`, `slow`）？

### 第三輪：歸屬記憶
1. 輸入：`我是陳威廷` 或 `老爸來了`
2. 觀察：背景是否變粉色？語氣是否變親暱？
3. 後續對話：`你好`
4. 觀察：是否用「老爸～」開場？

### 第四輪：語氣標籤
1. 輸入：`小軟，用耳語說給我聽`
2. 觀察：是否選擇 `whisper`, `breathy`？
3. 輸入：`安慰我一下`
4. 觀察：是否選擇 `warm`, `tender`？

## 📋 測試檢查清單

### 環境準備
- [ ] `.env` 文件已配置（OPENAI_API_KEY, CARTESIA_API_KEY）
- [ ] `node_modules` 已安裝（`npm install`）
- [ ] 服務器正常啟動
- [ ] 端口 3000 未被占用

### 核心功能
- [ ] 文字對話正常
- [ ] 語音對話正常
- [ ] 情緒識別正常
- [ ] 標籤選擇正常
- [ ] 語音合成正常

### 高級功能
- [ ] 歸屬記憶（識別老爸）
- [ ] 輕撫模式（自動啟動）
- [ ] 語氣切換（自然）
- [ ] 前端可視化（背景變化）

## 🔍 常見問題

### 問題 1：服務器無法啟動

**檢查：**
```bash
# 檢查端口是否被占用
netstat -ano | findstr :3000

# 檢查環境變數
cat .env
```

**解決：**
- 更改 `PORT` 環境變數
- 或關閉占用端口的進程

### 問題 2：API 錯誤

**檢查：**
- OpenAI API Key 是否有效
- Cartesia API Key 是否有效
- 網絡連接是否正常

### 問題 3：語音無法播放

**檢查：**
- 瀏覽器控制台是否有錯誤
- 麥克風權限是否授予
- 音頻格式是否支持

## 💡 測試技巧

1. **使用瀏覽器開發者工具**
   - F12 打開控制台
   - 查看 Network 請求
   - 查看 Console 日誌

2. **觀察服務器日誌**
   - 會顯示情緒檢測
   - 會顯示標籤選擇
   - 會顯示身份識別

3. **對比預期與實際**
   - 參考 `test/emotion-test-cases.json`
   - 記錄不符合預期的情況

## 📊 測試報告

運行完整測試後，查看 `test/test-report.json` 了解詳細結果。

---

**準備好開始測試了嗎？** 🧪✨

```bash
# 啟動服務器
npm start

# 在另一個終端運行測試
npm test
```



